# الطبيب — العمليات والصلاحيات (Dentist Role – Operations & Permissions)

## نظام إدارة عيادة الأسنان (Dental Clinic Management System)

**الدور:** DENTIST (طبيب)  
**النطاق:** مواعيد الطبيب نفسه فقط  
**اللغة:** عربي فقط (RTL)  
**الموقع/المنطقة:** دمشق — سوريا  
**العملة:** غير مرئية للطبيب (الطبيب لا يتعامل مع المال)

---

## 1) مبادئ أساسية (غير قابلة للتفاوض)

1. **الطبيب هو المرجع الطبي الوحيد**

   - الطبيب يقرر:
     - هل المريض حضر
     - هل تمت الزيارة
     - هل الموعد أُلغي أو No-Show
   - هذا قرار طبي/تشغيلي نهائي

2. **الطبيب لا يتعامل مع المال**

   - لا فواتير
   - لا دفعات
   - لا ذمم
   - لا مصاريف
   - لا أرباح العيادة

3. **كل صلاحيات الطبيب محصورة بنطاقه**

   - فقط المواعيد المرتبطة به
   - فقط المرضى المرتبطين بمواعيده

4. **كل العمليات الحساسة تُسجّل في Audit Log**

---

## 2) المواعيد (Appointments)

### 2.1 عرض المواعيد

الطبيب يستطيع:

- عرض جميع مواعيده
- عرض تفاصيل الموعد:
  - المريض
  - الوقت
  - الخدمة
  - الحالة
  - الملاحظات
  - المرفقات

### 2.2 تغيير حالة الموعد (صلاحية أساسية)

> **الطبيب يملك الصلاحية الكاملة لتغيير حالة الموعد الخاص به**

#### الحالات المعتمدة

- `SCHEDULED`
- `COMPLETED`
- `CANCELLED`
- `NO_SHOW`

#### الانتقالات المسموحة

- `SCHEDULED → COMPLETED`
- `SCHEDULED → CANCELLED`
- `SCHEDULED → NO_SHOW`

❌ لا يسمح بأي انتقال آخر  
❌ لا يسمح بإعادة فتح الموعد بعد الإغلاق

#### قواعد مهمة

- عند تغيير الحالة:
  - يجب تسجيل العملية في Audit Log
  - يُفضّل (أو يُفرض حسب الإعداد) إدخال سبب عند:
    - CANCELLED
    - NO_SHOW
- عند `COMPLETED`:
  - النظام ينشئ Visit تلقائيًا
  - النظام ينشئ Invoice تلقائيًا (غير مرئية للطبيب)

---

## 3) الزيارة السريرية (Visits / Clinical Record)

### 3.1 ما الذي يستطيع الطبيب فعله؟

- عرض الزيارة الخاصة به
- كتابة وتعديل:
  - الملاحظات الطبية
  - التشخيص
  - خطة العلاج
- إرفاق صور وملفات (أشعة، صور فموية، تقارير…)

### 3.2 ما الذي لا يستطيع الطبيب فعله؟

- تعديل السعر
- تطبيق خصم
- تعديل السعر النهائي
- حذف الزيارة

> السعر والخصم من صلاحيات **المدير فقط**

---

## 4) المرضى (Patients)

### 4.1 عرض المرضى

الطبيب يستطيع:

- عرض بيانات المرضى المرتبطين بمواعيده فقط
- عرض تاريخ الزيارات الخاصة به مع المريض
- الاطلاع على الملاحظات السريرية السابقة (ضمن نطاقه)

### 4.2 القيود

- لا يمكن للطبيب:
  - إنشاء مريض جديد
  - تعديل بيانات المريض الأساسية
  - تعطيل مريض
- لا وصول لمرضى خارج نطاق مواعيده

---

## 5) الملاحظات والمرفقات (Notes & Attachments)

### 5.1 صلاحيات مسموحة

- إضافة ملاحظات على:
  - الموعد (قبل الإغلاق)
  - الزيارة (بعد الإغلاق)
- رفع مرفقات:
  - صور
  - ملفات طبية
  - تقارير

### 5.2 قواعد

- الملاحظات الطبية **غير قابلة للحذف**
- أي تعديل يُسجّل في Audit Log
- المرفقات:
  - لا تُحذف نهائيًا
  - يمكن تعطيل الوصول إليها منطقيًا إن لزم

---

## 6) الأرباح (Dentist Earnings)

> الطبيب يرى **ملخص أرباحه فقط**  
> ولا يرى أي تفاصيل مالية أخرى.

### 6.1 ما الذي يراه الطبيب؟

- إجمالي أرباحه:
  - حسب فترة زمنية
- عدد الزيارات المكتملة
- (اختياري) إجمالي المقبوض المنسوب له **بدون تفاصيل**

### 6.2 ما الذي لا يراه؟

- الفواتير
- الدفعات
- الذمم
- أرباح العيادة
- مصاريف
- نسب أطباء آخرين

---

## 7) التقارير (Reports)

### التقارير المتاحة للطبيب

- تقرير زياراته المكتملة
- تقرير ملخص أرباحه

### التقارير غير المتاحة

- أي تقرير مالي تفصيلي
- أي تقرير على مستوى العيادة
- أي تصدير مالي

---

## 8) ما لا يستطيع الطبيب فعله (Hard Forbidden)

❌ إدارة المستخدمين  
❌ تغيير صلاحيات  
❌ إدارة الخدمات أو الأسعار  
❌ إنشاء أو تعديل فواتير  
❌ تسجيل دفعات أو تقسيط  
❌ إدارة المخزون  
❌ رؤية Audit Logs  
❌ تصدير تقارير مالية

---

## 9) Audit & Traceability

يجب تسجيل العمليات التالية في Audit Log:

- تغيير حالة الموعد
- إضافة / تعديل ملاحظة
- إضافة مرفق
- الدخول والخروج من النظام

كل سجل يجب أن يحتوي:

- الطبيب (actor)
- العملية
- الكيان
- التاريخ والوقت

---

## 10) ملخص تنفيذي (Executive Summary)

**الطبيب في النظام:**

- صاحب القرار الطبي الكامل
- صاحب قرار حالة الموعد
- مسؤول عن التوثيق السريري
- غير مسؤول عن المال
- غير قادر على رؤية المال
- محمي من الوقوع بأخطاء مالية

هذا الفصل بين:

> **القرار الطبي**  
> و **الأثر المالي**

هو ما يجعل النظام:

- آمن
- واقعي
- قابل للتدقيق
- قابل للتشغيل طويل الأمد

---

## END OF DENTIST PERMISSIONS DOCUMENT
